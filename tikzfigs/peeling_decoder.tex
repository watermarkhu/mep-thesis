\begin{figure}
  \centering
  \begin{tikzpicture}

    \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
    \draw[erasure] (1,1) -- (2,1) node[error]{$X$} -- (3,1) -- (3,2) -- (2,2) -- (1,2) -- (1,1) node[error]{$X$};
    \draw[erasure] (1,2) -- (1,3) -- (2,3) node[error]{$X$} -- (2,2);
    \node[description={center}] at (0, -.5) {initial state};

    \begin{scope}[shift={(5,0)}]
      \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
      \draw[erasure] (1,1) -- (2,1) -- (3,1) -- (3,2) -- (2,2) -- (1,2) -- (1,1);
      \draw[erasure] (1,2) -- (1,3) -- (2,3) -- (2,2);
      \node[anyon] at (1,2) {};
      \node[anyon] at (2,1) {};
      \node[anyon] at (1,3) {};
      \node[anyon] at (2,3) {};
      \node[description={center}] at (0, -.5) {indentify syndrome};
    \end{scope}

    \begin{scope}[shift={(10,1)}]
      \draw[thin] (0,2) -- (.5,2) ;
      \node[description] at (1, 2) {unerased edge};
      \draw[thin] (0,1.5) -- (.5,1.5)  node[error]{$X$};
      \node[description] at (1, 1.5) {edge with Pauli error};
      \draw[erasure] (0, 1) -- (.5, 1);
      \node[description] at (1, 1) {erased edge};
      \node[anyon] at (0.25, .5) {};
      \node[description] at (1, .5) {syndrome};
      \draw[correction] (0,0) -- (.5,0);
      \node[description] at (1, 0) {correction edge};
    \end{scope}

    \begin{scope}[shift={(0,-5.5)}]
      \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
      \draw[erasure] (1,3) -- (2,3) --  (2,2) -- (1,2) -- (1,1) -- (2,1) -- (3,1) -- (3,2);
      \node[description={center}] at (0, -.5) {construct $F_{\varepsilon}$};
      \node[anyon] at (1,2) {};
      \node[anyon] at (2,1) {};
      \node[anyon] at (1,3) {};
      \node[anyon] at (2,3) {};
    \end{scope}

    \begin{scope}[shift={(5,-5.5)}]
      \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
      \draw[erasure] (1,3) -- (2,3)  --  (2,2) -- (1,2) -- (1,1) -- (2,1);
      \draw[erasure, dashed] (2,1) -- (3,1) node[pos=0, below, text=black]{$v$} node[pos=0.5, above]{$e$} node[pos=1, below, text=black]{$u$};
      \node[description={center}] at (0, -.5) {peel $e=\{u,v\}, u \notin \sigma$};
      \node[anyon] at (1,2) {};
      \node[anyon] at (2,1) {};
      \node[anyon] at (1,3) {};
      \node[anyon] at (2,3) {};
    \end{scope}

    \begin{scope}[shift={(10,-5.5)}]
      \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
      \draw[erasure] (1,3) -- (2,3)  --  (2,2) -- (1,2) -- (1,1);
      \draw[erasure, dashed] (1,1) -- (2,1) node[pos=0, below, text=black]{$v$} node[pos=0.5, above]{$e$} node[pos=1, below, text=black]{$u$};
      \node[description={center}] at (0, -.5) {peel $e=\{u,v\}, u \in \sigma$};
      \node[anyon] at (1,2) {};
      \node[anyon] at (2,1) {};
      \node[anyon] at (1,3) {};
      \node[anyon] at (2,3) {};
    \end{scope}

    \begin{scope}[shift={(0,-11)}]
      \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
      \draw[erasure] (1,3) -- (2,3)  --  (2,2) -- (1,2) -- (1,1);
      \draw[correction] (1,1) -- (2,1) node[pos=0, below, text=black]{$v$} node[pos=0.5, above]{$\kappa$} node[pos=1, below, text=black]{$u$};
      \node[description={center}] at (0, -.5) {flip $v$, add $e$ to $\kappa$};
      \node[anyon] at (1,2) {};
      \node[anyon] at (2,1) {};
      \node[anyon] at (1,3) {};
      \node[anyon] at (2,3) {};
    \end{scope}

    \begin{scope}[shift={(5,-11)}]
      \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
      \draw[correction] (1,3) -- (2,3) node[error]{$X$};
      \draw[correction] (2,1) -- (1,1) node[error]{$X$} -- (1,2) node[error]{$X$};
      \node[description={center}] at (0, -.5) {apply correction set $\kappa$};
    \end{scope}

    \begin{scope}[shift={(10,-11)}]
      \draw[step=1cm,gray,thin] (0.1,0.1) grid (3.9,3.9);
      \node[description={center}] at (0, -.5) {end state};
    \end{scope}
  \end{tikzpicture}
  \caption{Schematic representation of the Peeling decoder.}
\end{figure}